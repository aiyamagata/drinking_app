# 休肝日アプリ 要件・仕様まとめ

## 目的と価値
- お酒好きの人が「禁酒」ではなく「健康的に飲み続ける」ための習慣づくりを支援
- ズボラな人でも続けられる、入力負荷を最小化した設計

## 想定ユーザー
- 30〜50代、男女
- 飲酒頻度: ほぼ毎日
- 課題:
  - 若い時よりも二日酔いが酷い
  - 健康診断の肝臓値がC判定以下
  - 将来の健康不安

## MVP機能
- 休肝日のトラック（1日単位）
  - 状態: `休肝 / 飲酒 / 未入力`
  - 日付区切り: 0:00
- 週/月の目標設定
  - 週: 0〜7日（初期値 2）
  - 月: 0〜31日（初期値 8）
- 目標進捗の可視化
  - 週/月の「達成数/目標数」表示 + 進捗バー

## 画面構成（MVP）
1) ホーム
   - 今日の状態をワンタップで変更
   - 週目標・月目標の進捗バー（例: 2/3, 7/8）
   - 直近7日 or ミニカレンダー

2) カレンダー
   - 月ビュー
   - 状態の色分け表示
     - 休肝: グリーン
     - 飲酒: オレンジ
     - 未入力: グレー
   - 日付タップで状態変更

3) 目標設定
   - 週目標（0〜7、初期値2）
   - 月目標（0〜31、初期値8）
   - 保存ボタン

## UX方針（ズボラ特化）
- 入力を2秒で終える設計（ワンタップ、通知から即記録）
- 未入力を責めないUI/文言
- まとめて入力できる導線を将来追加

## AI活用（ズボラ救済）
頻度: 週1で提案
- AI記録補助（推測→提案）
  - 例: 「最近は月曜だけ休肝が多い。今週も月曜休肝で良い？」
- 超短いTips（1文、30〜60文字）
  - 例: 「飲む前に水1杯で二日酔いリスクを下げる」
- パーソナライズ励まし（ゆるい友達トーン）
  - 例: 「今週1日休肝できたね。十分偉い」
- 週次まとめ
  - 例: 「今週は休肝1日。先週より+1日！」

## ゲーム性（キャラ育成）
- 休肝日で成長
- 飲酒日は維持（下降しない）
- 見た目進化が報酬
- 連続記録はゆるく救済（将来拡張）

### キャラコンセプト
- 酒好きのハムスター（ゆるキャラ）
- 丸い体、短い手足、点目、ゆるい表情
- 「なんとかなるよ〜」と言いそうな友達トーン

### 10段階進化（概要）
1) ほろ酔い（くすみ+赤いほっぺ）
2) 軽い疲れ（半目）
3) 疲れピーク（クマ+汗）
4) 回復開始（通常肌+水コップ）
5) 安定（明るめ肌+炭酸水）
6) 元気（艶+ハーブティー）
7) いい感じ（ピンク+星）
8) 健康オーラ（光）
9) 絶好調（ピース）
10) スーパー元気（後光）

## デザイン方針
- ゲームっぽく、可愛らしいアイコン
- パステル基調、丸みのあるUI
- ポジティブで優しい文言

## データ設計（Supabase）
### profiles
- `id` (uuid, auth.users連携)
- `created_at`

### daily_logs
- `id`
- `user_id`
- `date` (YYYY-MM-DD)
- `status` (`rest` / `drink` / `none`)
- `created_at`

### goals
- `id`
- `user_id`
- `weekly_target` (int)
- `monthly_target` (int)
- `created_at`
- `updated_at`

## 進行メモ
- BoltでMVP UI作成中
- GitHub: `aiyamagata/drinking_app`

## 開発トラブル対応メモ（Anaconda環境のNode.jsエラー）
Boltからダウンロードしたソースをローカルで動かす際、Node.js関連のエラーが出たら以下を実施する。

1) Anaconda環境をオフにする
```
conda deactivate
```

2) 正しいパスを通す
```
export PATH="/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"
```

3) Node.jsのバージョン確認（v20以上）
```
node -v
```

---

**引き継ぎ・次にやること** → `HANDOVER.md` を参照
